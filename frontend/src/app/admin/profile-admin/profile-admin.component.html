<div class="page-card">

  <div class="page-header">
    <div>
      <div class="page-title">Gestion des profils</div>
      <div class="page-subtitle">Profils + droits + administration</div>
    </div>

    <button class="primary" (click)="openCreate()">+ Nouveau profil</button>
  </div>

  <table class="table" *ngIf="profils.length > 0">
    <thead>
    <tr>
      <th>Code</th>
      <th>Libellé</th>
      <th>Admin</th>
      <th>Actif</th>
      <th>Rôles</th>
      <th style="width:180px">Actions</th>
    </tr>
    </thead>

    <tbody>
    <tr *ngFor="let p of profils">
      <td>{{ p.code }}</td>
      <td>{{ p.libelle }}</td>
      <td>{{ p.admin ? 'Oui' : 'Non' }}</td>
      <td>{{ p.actif ? 'Oui' : 'Non' }}</td>
      <td>
        <a [routerLink]="['/admin/profiles', p.id, 'roles']">Gérer les rôles</a>
      </td>

      <td class="table-actions">
        <button class="secondary" (click)="openEdit(p)">Modifier</button>
        <button class="danger" (click)="delete(p)">Supprimer</button>
      </td>
    </tr>
    </tbody>
  </table>

  <div *ngIf="showForm" class="form-card">
    <h3>{{ editMode ? 'Modifier un profil' : 'Nouveau profil' }}</h3>

    <form (ngSubmit)="save()">

      <div class="form-row">
        <label>Code *</label>
        <input [(ngModel)]="form.code" name="code">
      </div>

      <div class="form-row">
        <label>Libellé *</label>
        <input [(ngModel)]="form.libelle" name="libelle">
      </div>

      <div class="form-row">
        <label>Description</label>
        <textarea [(ngModel)]="form.description" name="description"></textarea>
      </div>

      <div class="form-row">
        <label>
          <input type="checkbox" [(ngModel)]="form.admin" name="admin">
          Administrateur
        </label>
      </div>

      <div class="form-row">
        <label>
          <input type="checkbox" [(ngModel)]="form.actif" name="actif">
          Actif
        </label>
      </div>

      <div class="form-actions">
        <button class="primary" type="submit">Enregistrer</button>
        <button type="button" class="secondary" (click)="cancel()">Annuler</button>
      </div>

    </form>
  </div>

</div>

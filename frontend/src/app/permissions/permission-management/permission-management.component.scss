// ============================================================================
// üîê PERMISSION MANAGEMENT - SIMPLE & CLEAN
// ============================================================================

.permission-page {
  max-width: 1200px;
  margin: 0 auto;
}

// ============================================================================
// üìã PAGE HEADER
// ============================================================================
// Banni√®re admin
.admin-notice {
  margin-bottom: var(--spacing-lg);
  background: linear-gradient(135deg, rgba(255, 152, 0, 0.1), rgba(255, 193, 7, 0.05));
  border-left: 4px solid #ff9800;

  .notice-content {
    display: flex;
    align-items: flex-start;
    gap: var(--spacing-md);
    padding: var(--spacing-sm);

    .notice-icon {
      font-size: 32px;
      width: 32px;
      height: 32px;
      color: #f57c00;
      flex-shrink: 0;
    }

    .notice-text {
      flex: 1;

      strong {
        display: block;
        font-size: 1.1rem;
        color: #e65100;
        margin-bottom: var(--spacing-xs);
        font-weight: 600;
      }

      p {
        margin: 0;
        color: var(--text-secondary);
        font-size: 0.95rem;
        line-height: 1.5;
      }
    }
  }
}

// Message info dans les actions
.admin-hint {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  color: var(--color-warning);
  font-size: 0.9rem;
  margin-left: var(--spacing-md);

  mat-icon {
    font-size: 18px;
    width: 18px;
    height: 18px;
  }
}

// Checkboxes d√©sactiv√©es avec style sp√©cial pour admin
.env-type-checkbox,
.actions-checkboxes mat-checkbox {
  &.mat-mdc-checkbox-disabled {
    opacity: 0.8;

    // Si coch√© ET d√©sactiv√© (cas admin)
    &.mat-mdc-checkbox-checked {
      .mdc-checkbox__background {
        border-color: var(--color-primary) !important;
        background-color: var(--color-primary) !important;
      }
    }

    .mdc-label {
      color: var(--text-primary) !important;
    }
  }
}
.page-header {
  padding: var(--space-6);
  background: var(--bg-elevated);
  border-radius: var(--radius-xl);
  border: 1px solid var(--border-color);
  margin-bottom: var(--space-6);

  h1 {
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: var(--text-primary);
    margin: 0 0 var(--space-1) 0;
  }

  .subtitle {
    font-size: var(--text-sm);
    color: var(--text-secondary);
    margin: 0;
  }

  @media (max-width: 768px) {
    padding: var(--space-4);

    h1 {
      font-size: var(--text-xl);
    }
  }
}

// ============================================================================
// üé¥ CARDS
// ============================================================================

.card {
  background: var(--bg-elevated);
  border-radius: var(--radius-xl);
  border: 1px solid var(--border-color);
  box-shadow: var(--shadow-md);
  padding: var(--space-6);

  @media (max-width: 768px) {
    padding: var(--space-4);
  }
}

// ============================================================================
// üë§ PROFIL SELECTOR
// ============================================================================

.profil-selector {
  margin-bottom: var(--space-6);

  .full-width {
    width: 100%;
  }

  ::ng-deep {
    .mat-mdc-form-field {
      width: 100%;

      .mat-mdc-text-field-wrapper {
        background: var(--bg-primary);
      }

      .mat-mdc-floating-label {
        color: var(--text-secondary);
      }

      .mat-mdc-select {
        color: var(--text-primary);
      }
    }
  }
}

// ============================================================================
// ‚è≥ LOADING ZONE
// ============================================================================

.loading-zone {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--space-16) var(--space-8);
  gap: var(--space-4);
  background: var(--bg-elevated);
  border-radius: var(--radius-xl);
  border: 1px solid var(--border-color);

  ::ng-deep .mat-mdc-progress-spinner {
    --mdc-circular-progress-active-indicator-color: var(--brand-primary);
  }

  p {
    font-size: var(--text-sm);
    color: var(--text-secondary);
    margin: 0;
  }
}

// ============================================================================
// ü™ú STEPPER
// ============================================================================

::ng-deep {
  .mat-stepper-horizontal {
    background: transparent;
  }

  .mat-horizontal-stepper-header-container {
    margin-bottom: var(--space-6);
    background: var(--bg-elevated);
    border-radius: var(--radius-xl);
    border: 1px solid var(--border-color);
    padding: var(--space-4);
  }

  .mat-step-header {
    padding: var(--space-4);
    border-radius: var(--radius-lg);

    &:hover {
      background: var(--bg-secondary);
    }

    .mat-step-icon {
      background-color: var(--neutral-400);
      color: var(--text-inverse);
    }

    .mat-step-icon-selected {
      background-color: var(--brand-primary);
    }

    .mat-step-icon-state-done {
      background-color: var(--color-success);
    }

    .mat-step-label {
      color: var(--text-primary);
      font-size: var(--text-sm);
      font-weight: var(--font-medium);
    }

    .mat-step-label-selected {
      color: var(--brand-primary);
      font-weight: var(--font-semibold);
    }
  }

  .mat-horizontal-content-container {
    padding: 0;
  }
}

// ============================================================================
// üé¥ PERMISSION MODULE
// ============================================================================

.permission-module {
  background: var(--bg-elevated);
  border-radius: var(--radius-xl);
  border: 1px solid var(--border-color);
  box-shadow: var(--shadow-md);

  ::ng-deep {
    .mat-mdc-card-header {
      padding: var(--space-6);
      border-bottom: 1px solid var(--divider-color);
      background: var(--bg-secondary);
    }

    .mat-mdc-card-title {
      display: flex;
      align-items: center;
      gap: var(--space-3);
      font-size: var(--text-lg);
      font-weight: var(--font-semibold);
      color: var(--text-primary);
      margin: 0 0 var(--space-1) 0;

      .mat-icon {
        color: var(--brand-primary);
        font-size: 24px;
        width: 24px;
        height: 24px;
      }
    }

    .mat-mdc-card-subtitle {
      font-size: var(--text-sm);
      color: var(--text-secondary);
      margin: 0;
    }

    .mat-mdc-card-content {
      padding: var(--space-6);
    }

    .mat-mdc-card-actions {
      padding: var(--space-6);
      border-top: 1px solid var(--divider-color);
      background: var(--bg-secondary);
      display: flex;
      gap: var(--space-3);
      justify-content: flex-end;

      &.step-actions {
        justify-content: space-between;

        @media (max-width: 768px) {
          flex-direction: column;

          button {
            width: 100%;
          }
        }
      }
    }
  }

  @media (max-width: 768px) {
    ::ng-deep {
      .mat-mdc-card-header,
      .mat-mdc-card-content,
      .mat-mdc-card-actions {
        padding: var(--space-4);
      }
    }
  }
}

// ============================================================================
// üåç ENV TYPE GRID
// ============================================================================

.env-type-grid {
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
}

.env-type-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-4);
  padding: var(--space-4);
  background: var(--bg-secondary);
  border-radius: var(--radius-lg);
  border: 1px solid var(--border-color);
  transition: all var(--transition-fast);

  &:hover {
    background: var(--bg-tertiary);
    border-color: var(--border-color-hover);
  }

  // Version simple (step 1) - juste checkbox
  &.simple {
    padding: var(--space-3);
  }

  @media (max-width: 768px) {
    flex-direction: column;
    align-items: stretch;
  }
}

// ============================================================================
// ‚úÖ CHECKBOX ENV TYPE
// ============================================================================

.env-type-checkbox {
  flex: 1;

  ::ng-deep {
    .mdc-checkbox {
      margin-right: var(--space-2);
    }

    .mdc-label {
      width: 100%;
    }
  }
}

.env-type-label {
  display: flex;
  flex-direction: column;
  gap: var(--space-1);

  strong {
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    color: var(--text-primary);
  }
}

.env-type-code {
  display: inline-flex;
  padding: var(--space-1) var(--space-2);
  background: var(--neutral-200);
  color: var(--neutral-800);
  border-radius: var(--radius-sm);
  font-size: var(--text-xs);
  font-weight: var(--font-semibold);
  font-family: var(--font-mono);
  border: 1px solid var(--neutral-300);
}

[data-theme="dark"] .env-type-code {
  background: var(--neutral-800);
  color: var(--neutral-200);
  border-color: var(--neutral-700);
}

// ============================================================================
// ‚úÖ ACTIONS CHECKBOXES (Step 2)
// ============================================================================

.actions-checkboxes {
  display: flex;
  gap: var(--space-4);
  flex-wrap: wrap;

  @media (max-width: 768px) {
    flex-direction: column;
    gap: var(--space-2);
    width: 100%;
  }

  ::ng-deep .mat-mdc-checkbox {
    .mdc-label {
      font-size: var(--text-sm);
      font-weight: var(--font-medium);
      color: var(--text-primary);
    }

    // Colors selon l'action
    &.mat-mdc-checkbox-checked {
      .mdc-checkbox__background {
        background-color: var(--brand-primary);
        border-color: var(--brand-primary);
      }
    }
  }
}

// ============================================================================
// üö´ EMPTY STATE
// ============================================================================

.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--space-12) var(--space-8);
  text-align: center;
  gap: var(--space-4);

  .mat-icon {
    font-size: 48px;
    width: 48px;
    height: 48px;
    color: var(--text-disabled);
  }

  p {
    font-size: var(--text-base);
    color: var(--text-secondary);
    margin: 0;
  }

  button {
    margin-top: var(--space-2);
  }
}

// ============================================================================
// üîò BUTTONS
// ============================================================================

button[mat-raised-button],
button[mat-stroked-button] {
  height: var(--button-height);
  font-weight: var(--font-medium);
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);

  .mat-icon {
    font-size: 20px;
    width: 20px;
    height: 20px;
  }

  ::ng-deep .mat-mdc-progress-spinner {
    margin-right: var(--space-2);

    circle {
      stroke: var(--text-inverse);
    }
  }
}

button[mat-stroked-button] {
  border-color: var(--border-color);
  color: var(--text-secondary);

  &:hover:not([disabled]) {
    background: var(--bg-tertiary);
    border-color: var(--text-secondary);
  }
}

button[mat-raised-button][color="primary"] {
  &:disabled {
    opacity: 0.6;
  }
}

// ============================================================================
// üé® PROFIL SELECT PANEL
// ============================================================================

::ng-deep .profil-select-panel {
  .mat-mdc-option {
    padding: var(--space-3) var(--space-4);
    font-size: var(--text-sm);

    &:hover {
      background: var(--bg-secondary);
    }

    &.mat-mdc-option-active {
      background: var(--bg-tertiary);
    }
  }
}

// ============================================================================
// üçû TOAST NOTIFICATIONS
// ============================================================================

::ng-deep {
  .success-snackbar {
    background: var(--color-success) !important;
    color: var(--text-inverse) !important;

    .mdc-snackbar__label {
      color: var(--text-inverse) !important;
    }
  }

  .error-snackbar {
    background: var(--color-error) !important;
    color: var(--text-inverse) !important;

    .mdc-snackbar__label {
      color: var(--text-inverse) !important;
    }
  }
}

// ============================================================================
// üì± RESPONSIVE
// ============================================================================

@media (max-width: 768px) {
  .permission-page {
    padding: 0;
  }

  .page-header {
    margin-bottom: var(--space-4);
  }

  .profil-selector {
    margin-bottom: var(--space-4);
  }

  ::ng-deep {
    .mat-horizontal-stepper-header-container {
      margin-bottom: var(--space-4);
      padding: var(--space-3);
    }

    .mat-step-header {
      padding: var(--space-2);

      .mat-step-label {
        font-size: var(--text-xs);
      }
    }
  }

  .env-type-grid {
    gap: var(--space-3);
  }
}

// ============================================================================
// ‚ôø ACCESSIBILITY
// ============================================================================

// Focus visible
::ng-deep {
  .mat-mdc-checkbox:focus-within {
    .mdc-checkbox {
      outline: 2px solid var(--brand-primary);
      outline-offset: 2px;
      border-radius: var(--radius-sm);
    }
  }

  .mat-step-header:focus-visible {
    outline: 2px solid var(--brand-primary);
    outline-offset: 2px;
  }
}

button:focus-visible {
  outline: 2px solid var(--brand-primary);
  outline-offset: 2px;
}

// High contrast mode
@media (prefers-contrast: high) {
  .env-type-row {
    border-width: 2px;
  }

  .env-type-code {
    border-width: 2px;
  }
}

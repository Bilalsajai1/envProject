<div class="dashboard-page">

  <div class="page-card">
    <div class="breadcrumb">
      <span>Plateforme</span> / <span class="current">Dashboard</span>
    </div>

    <div class="page-header">
      <div>
        <div class="page-title">Dashboard des environnements</div>
        <div class="page-subtitle">
          Vue globale des projets, environnements et applications configurées.
        </div>
      </div>

      <button class="secondary" (click)="load()">↻ Rafraîchir</button>
    </div>

    <div *ngIf="loading">Chargement...</div>
    <div *ngIf="error" class="error">{{ error }}</div>

    <ng-container *ngIf="summary && !loading">

      <div class="cards-grid">
        <div class="stat-card main">
          <div class="stat-header">
            <span class="stat-title">Projets</span>
          </div>
          <div class="stat-value">{{ summary.totalProjects }}</div>
          <div class="stat-footer">Projets suivis dans la plateforme</div>
        </div>

        <div class="stat-card">
          <div class="stat-header">
            <span class="stat-title">Environnements</span>
          </div>
          <div class="stat-value">{{ summary.totalEnvironments }}</div>
          <div class="stat-footer">
            Actifs : <b>{{ summary.activeEnvironments }}</b>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-header">
            <span class="stat-title">Applications globales</span>
          </div>
          <div class="stat-value">{{ summary.totalApplications }}</div>
          <div class="stat-footer">
            Types d'applications disponibles
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-header">
            <span class="stat-title">Applications configurées</span>
          </div>
          <div class="stat-value">{{ summary.totalEnvApplications }}</div>
          <div class="stat-footer">
            Actives : <b>{{ summary.activeEnvApplications }}</b>
          </div>
        </div>
      </div>

      <div class="bottom-row">
        <div class="info-card">
          <h3>Flux fonctionnel</h3>
          <p>
            1. Choisir un <b>type d'environnement</b> dans le menu.<br>
            2. Sélectionner un <b>projet</b> associé.<br>
            3. Gérer les <b>environnements</b> (DEV, REC, PROD...).<br>
            4. Configurer les <b>applications</b> déployées par environnement.
          </p>
        </div>

        <div class="info-card">
          <h3>Aperçu</h3>
          <p>
            Ce dashboard consolide les données de la plateforme : nombre de projets,
            environnements configurés, et applications liées (frontend, backend, batch, etc.).
          </p>
        </div>
      </div>

    </ng-container>
  </div>
</div>
